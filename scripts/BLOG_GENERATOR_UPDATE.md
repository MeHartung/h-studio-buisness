# Обновление генератора блога под производственный фокус

## Что изменено

Генератор блога адаптирован под новый фокус сайта: автоматизация расчётов, КП, себестоимость, 1С/ERP и AI для производства.

### 1. Новые конфигурационные файлы

#### `sources.yaml`
- Добавлены keywords для производства и расчётов
- Настроены title-boost коэффициенты для приоритетных тем
- Добавлены RSS-источники для поиска актуальных тем

#### `ai_rules.json`
- Кластеры тем (topics_to_cover): Costing & Quotations, Document Workflow, ERP/1C Integrations, Production Analytics & AI, Implementation
- Архетипы статей: excel_to_system, mistakes_and_fixes, before_after
- Правила для производства (ru_manufacturing_rules): аудитория, что избегать, обязательные элементы, примеры KPI
- Структура статей: ICP_PLAY (900-1200 слов), PILLAR, TREND_ANALYSIS

### 2. Обновлён `generate-with-ai.js`

#### Новые функции:
- `detectInternalTags()` - определение английских тегов для внутренней логики
- `addInternalLinks()` - автоматическое добавление внутренних ссылок на услуги

#### Обновлённая структура статей (ICP_PLAY):
1. Крюк / контекст
2. Симптомы (5–7 маркеров)
3. Риски и деньги
4. Как работает автоматизированная схема
5. Quick wins (7–14 дней)
6. Mini-case / пример
7. KPI и как измерить успех
8. Мягкий CTA

#### Внутренняя перелинковка:
- Автоматически добавляются ссылки на соответствующие услуги на основе тегов:
  - `costing`, `quotations` → Автоматизация расчётов и КП
  - `documents`, `approvals` → Документооборот и согласования
  - `1c`, `erp`, `integration` → Интеграции с 1С, ERP, CRM
  - `ai`, `analytics` → AI-инструменты и аналитика
  - `implementation` → Внедрение и обучение персонала

### 3. Обновлён `topic-search.js`

#### Добавлено:
- Список тегов для классификации: manufacturing, engineering, costing, quotations, configurators, documents, approvals, 1c, erp, crm, ai, analytics, automation, integration
- Логика отбора тем: ДА/НЕТ критерии для фильтрации
- Теги в выводе тем для лучшей классификации

## Использование

### Поиск тем
```bash
node scripts/topic-search.js --query "автоматизация КП" --count 10
```

### Генерация статьи
```bash
npm run blog:generate:ai -- --topic "автоматизация расчётов себестоимости" --category "Автоматизация"
```

## Структура статей

По умолчанию используется режим **ICP_PLAY** (900-1200 слов):
- Плотный контент без воды
- Конкретные цифры и примеры
- Фокус на производственные компании
- Автоматическая внутренняя перелинковка

## Ключевые изменения в промптах

1. **Аудитория**: директор по производству, коммерческий директор, главный инженер
2. **Стиль**: прямой, экспертный, инженерный, без маркетинговых штампов
3. **Обязательные элементы**: цифры, примеры, схемы процессов, KPI
4. **Избегать**: IT-термины без объяснений, общие фразы, корпоративный буллшит

## Внутренние ссылки

Ссылки добавляются автоматически в конец статьи на основе тегов:
- Определяются по ключевым словам в теме/заголовке
- Ведут на соответствующие страницы услуг
- Форматируются как "Связанные услуги: [название](ссылка)"

